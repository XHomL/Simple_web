
<!DOCTYPE html>
<html>
  <head>
    <title>HomePage</title>
      <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
      <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
      <link type="text/css" rel="stylesheet" href="/css/main.css">

      <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
      <script src="https://cdn.bootcss.com/jquery-cookie/1.3.0/jquery.cookie.js"></script>
      <!--<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">-->
      <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

      <script src="https://cdn.bootcss.com/moment.js/2.18.1/moment-with-locales.min.js"></script>
      <!--<link href="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" rel="stylesheet">-->
      <script src="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>

    <style type="text/css">
  h1 {
    font-family: 微软雅黑;
    margin-bottom: 20px;
    margin-top: 20px;
  }
  header {
    border-bottom: 1px solid #EFEFEF;
  }

  .h2, h2{
    margin-top: 15px;
    margin-bottom: 15px;
  }


  .img-fluid {
    width: 100px;
    height: 100px;
  }

  .rounded-circle {
    border-radius: 50%;
  }

  .ser {
    font-family: 'Allerta Stencil', sans-serif;
    padding: 8px;
    top: 29%;
    font-weight: bold;
    border-bottom: 2px solid;
    text-align: center;
    position: relative;
    margin-bottom: 40px;
    font-size: 20px;
  }

  /*header {*/
    /*background: url('image/bg.jpg') no-repeat;*/
    /*background-size:cover;*/
    /*opacity:0.85;*/
  /*}*/


</style>

    
<body>
    <!-- Headers  -->
    <header class="header-wrapper">
      <div class="container">
        <nav class="navbar navbar-expand-md">
          
    
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav3" aria-controls="navbarNav3" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
    
          <div class="collapse navbar-collapse" id="navbarNav3">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item active">
                <a class="nav-link" href="/home">主页 <span class="sr-only">(current)</span></a>
              </li>
              <!-- <li class="nav-item">
                <a class="nav-link" href="">送礼</a>
              </li> -->
              <!-- <li class="nav-item">
                <a class="nav-link" href="">商品管理</a>
              </li> -->
              <li class="nav-item">
                <a class="nav-link" href="/orderList">我的订单</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/mypage">我的</a>
              </li>
            </ul>
    
            <a class="btn btn-outline-primary ml-md-3" href="/login">退出登录</a>
          </div>
        </nav>
      </div>
    </header>
    <section class="search-area-wrapper fdb-block" id="search">
      <div class="container search-area">
        <div class="row justify-content-center">
          <div class="col-12 col-md-8 col-lg-6 text-center">
            <!-- <h1>Subscribe</h1> -->
            <div class="input-group mt-4 mb-4">
              <input type="text" class="form-control" placeholder="Search for..." id="srch">
              <div class="input-group-append">
                <button class="btn btn-primary" type="button" id="doSrch">search</button>
              </div>
            </div>


          </div>
        </div>
      </div>
    </section>



    <!-- 今日男神女神 -->
<div  id="prince">
    <section class="fdb-block team-2">
      <div class="container">
        <div class="row text-center justify-content-center">
          <div class="col-8">
            <h1>Today's god and goddess</h1>
          </div>
        </div>

        <div class="row-50"></div>

        <div class="row text-center justify-content-center">
          <div class="col-sm-2 m-sm-auto" id="female">

          </div>

          <div class="col-sm-2 m-sm-auto" id="male">

          </div>


        </div>
      </div>
    </section>
</div>

    <!-- Start of Footer -->
    <footer id="footer-wrapper">
      <div id="footer" class="container">
        <div class="row text-center justify-content-center" >

          <div class="span3">
            <section class="widget">
              <h3 class="title">How it works</h3>
              <div class="textwidget">
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. </p>
                <p>Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. </p>
              </div>
            </section>
          </div>

          <div class="span3">
            <section class="widget"><h3 class="title">Categories</h3>
              <ul>
                <li><a href="#" title="Lorem ipsum dolor sit amet,">Advanced Techniques</a> </li>
                <li><a href="#" title="Lorem ipsum dolor sit amet,">Designing in WordPress</a></li>
                <li><a href="#" title="Lorem ipsum dolor sit amet,">Server &amp; Database</a></li>
                <li><a href="#" title="Lorem ipsum dolor sit amet, ">Theme Development</a></li>
                <li><a href="#" title="Lorem ipsum dolor sit amet,">Website Dev</a></li>
                <li><a href="#" title="Lorem ipsum dolor sit amet,">WordPress for Beginners</a></li>
                <li><a href="#" title="Lorem ipsum dolor sit amet, ">WordPress Plugins</a></li>
              </ul>
            </section>
          </div>

          <div class="span3">
            <section class="widget">
              <h3 class="title">Latest Tweets</h3>
              <div id="twitter_update_list">
                <ul>
                  <li>No Tweets loaded !</li>
                </ul>
              </div>

            </section>
          </div>

          <div class="span3">
            <section class="widget">
              <h3 class="title">Flickr Photos</h3>
              <div class="flickr-photos" id="basicuse">
              </div>
            </section>
          </div>

        </div>
      </div>
      <!-- end of #footer -->

      <!-- Footer Bottom -->
      <div id="footer-bottom-wrapper">
        <div id="footer-bottom" class="container">
          <div class="row1">
            <div class="span6">
              <p class="copyright">
                Copyright © 2018.12.15 All Rights Reserved by JLU.
              </p>
            </div>
            <div class="span6">
              <!-- Social Navigation -->
              <ul class="social-nav clearfix">
                <li class="linkedin"><a target="_blank" href="#"></a></li>
                <li class="stumble"><a target="_blank" href="#"></a></li>
                <li class="google"><a target="_blank" href="#"></a></li>
                <li class="deviantart"><a target="_blank" href="#"></a></li>
                <li class="flickr"><a target="_blank" href="#"></a></li>
                <li class="skype"><a target="_blank" href="skype:#?call"></a></li>
                <li class="rss"><a target="_blank" href="#"></a></li>
                <li class="twitter"><a target="_blank" href="#"></a></li>
                <li class="facebook"><a target="_blank" href="#"></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- End of Footer Bottom -->

    </footer>
</body>
<script type="text/javascript">
        var user = new Object();
        // $.cookie('phoneNum',18899990004 );
        user.phoneNum = $.cookie('phoneNum');
        if (user.phoneNum==null)
            window.location.replace("/login");

        function showMaleDetail(obj){
            var princephoneNum=$.cookie("male");
            $.cookie("prince",princephoneNum);
            window.location.href = "/otherHome";
        }
        function showFeMaleDetail(obj){
            var princephoneNum=$.cookie("female");
            $.cookie("prince",princephoneNum);
            window.location.href = "/otherHome";
        }


      $(document).ready(function(){

          var male = new Object();//记录男神
          var female = new Object();//记录女神

          var str = getFormatDate();
          
            //今日男神 女神头像
            $.ajax({
                    // url: "http://172.20.10.4:8080/getTodayPrince",
                    url: "/getTodayPrince",
                    type: "POST",
                    contentType: "application/json",
                    dataType: "json",
                    success: function(result){
                      for (i in result){
                          if (result[i].sex=="man") {
                              var man = "<img alt=\"image\" class=\"img-fluid rounded-circle\" src=\"/image/1.png\" onclick =\"showMaleDetail(this)\">"+"<h2>今日男神</h2>"
                                  // + "<p>"+result[i].username+"</p>"
                              $("#male").append(man);
                              $.cookie("male",result[i].phoneNum);
                              $.cookie("othHome_method",1);
                          } else if (result[i].sex=="woman") {
                              var girl = "<img alt=\"image\" class=\"img-fluid rounded-circle\" src=\"/image/1.png\" onclick =\"showFeMaleDetail(this)\">"+"<h2>今日女神</h2>"
                                  // + "<p>"+result[i].username+"</p>"
                              $("#female").append(girl);
                              $.cookie("female",result[i].phoneNum);
                              $.cookie("othHome_method",1);
                          }
                      }
                    }
                  })
            


            $('#doSrch').click(function(){

                var search = $('#srch').val();
                if(search == ''){
                  alert("请输入搜索内容!");
                }else {
                    $.ajax({
                      url: "/checkUserExist",
                      type: "POST",
                      contentType: "application/json",
                      dataType: "json",
                      data:JSON.stringify({"string":search}),
                      success: function(result){
                        if(result) {
                    $("#prince").empty();
                    if (result.length == 0) {
                        $('#prince').html('<p class=\'ser\'>没有匹配的结果，换个关键词试试</p>');
                    } else {
                        $("#prince").append("<div id='result'></div>");
                        $("#result").append("<div class='ser'>Search Result</div>");
                        for (i in result) {
                            $("#result").append("<div style='text-align: center'><a onclick=\"getmsg(this)\">" + result[i].username + "</a></div><br>");
                            $.cookie(result[i].username, result[i].phoneNum);
                        }
                    }
                }
                      else
                        alert("error");
                    }
                  })
                }


            })
            

            

    })

        function getFormatDate() {
            var nowDate = new Date();
            var year = nowDate.getFullYear();
            var month = nowDate.getMonth() + 1 < 10 ? "0" + (nowDate.getMonth() + 1) : nowDate.getMonth() + 1;
            var date = nowDate.getDate() < 10 ? "0" + nowDate.getDate() : nowDate.getDate();
            var hour = nowDate.getHours() < 10 ? "0" + nowDate.getHours() : nowDate.getHours();
            var minute = nowDate.getMinutes() < 10 ? "0" + nowDate.getMinutes() : nowDate.getMinutes();
            var second = nowDate.getSeconds() < 10 ? "0" + nowDate.getSeconds() : nowDate.getSeconds();
            return year + "-" + month + "-" + date + " " + hour + ":" + minute + ":" + second;
        }

        function getmsg(obj){
            var user = $(obj).text();
            var phoneNum=$.cookie(user);
            $.cookie("strangephone",phoneNum);
            var check=$.cookie("strangephone");
            var relationship=new Object();
            relationship.userPhoneNum=$.cookie("phoneNum");
            relationship.targetPhoneNum=phoneNum;
            $.ajax({
                url: "/getRelation",
                type: "POST",
                contentType: "application/json",
                dataType: "json",
                data: JSON.stringify(relationship),
                success: function (data) {
                    if(data)
                        $.cookie("othHome_method", 2);
                    else
                        $.cookie("othHome_method", 3);
                    window.location.replace("/otherHome");
                }
            });

        }

</script>
</html>